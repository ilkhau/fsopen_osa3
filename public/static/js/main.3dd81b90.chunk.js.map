{"version":3,"sources":["components/Caption.js","components/Button.js","components/Persons.js","components/Filter.js","components/PersonForm.js","services/PersonService.js","components/Notification.js","App.js","index.js"],"names":["Caption","_ref","caption","react_default","a","createElement","Button","text","handler","Fragment","onClick","Person","person","deleteHandler","console","log","name","number","components_Button","id","Persons","_ref2","persons","nameFilter","components_Caption","filterFn","length","val","toLowerCase","includes","toLocaleLowerCase","filter","map","JSON","stringify","Persons_Person","key","personList","Filter","changeHandler","value","onChange","PersonForm","nameHandler","numberHandler","submitHandler","type","baseUrl","PersonService","axios","get","then","resp","data","catch","err","newPerson","post","deleteUrl","concat","delete","result","updateUrl","put","Notification","message","className","App","_useState","useState","_useState2","Object","slicedToArray","noteText","setNoteText","_useState3","_useState4","noteType","setNoteType","_useState5","_useState6","setPersons","_useState7","_useState8","newName","setNewName","_useState9","_useState10","newNumber","setNewNumber","_useState11","_useState12","setNewNameFilter","useEffect","personservice","initialPersons","showNote","setNoteDismissal","setTimeout","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","some","window","confirm","objectSpread","find","p","up","components_Persons","finally","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.3dd81b90.chunk.js","sourcesContent":["import React from 'react';\n\nconst Caption = ({caption}) => {\n    return (\n        <h2>{caption}</h2>\n    )\n};\n\nexport default Caption;","import React from 'react';\n\nconst Button = ({text, handler}) => {\n    return (\n        <>\n            <button onClick={handler} >{text}</button>\n        </>\n    )\n};\n\nexport default Button;","import React from 'react';\nimport Caption from './Caption'\nimport Button from './Button'\n\nconst Person = ({person, deleteHandler}) => {\n    console.log(person);\n    return (\n        <li>\n            {person.name} {person.number}\n            <Button text=\"poista\" handler={deleteHandler(person.id)} />\n        </li>\n    )\n};\n\nconst Persons = ({persons, nameFilter, deleteHandler}) => {\n\n    const personList = () => {\n\n        let filterFn = (person) => true;\n\n        if (nameFilter.length > 0) {\n            filterFn = (person) => {\n                const val = person.name.toLowerCase().includes(nameFilter.toLocaleLowerCase());\n                console.log(person, val);\n                return val;\n            }\n        }\n\n        return persons.filter(person => filterFn(person)).map(person => {\n            console.log(JSON.stringify(person));\n            return <Person key={person.name} person={person} deleteHandler={deleteHandler}/>\n        });\n    };\n\n    return (\n        <div>\n            <Caption caption=\"Henkilöt\"/>\n            <ul>\n                {personList()}\n            </ul>\n        </div>\n    )\n};\n\nexport default Persons;","import React from 'react';\n\nconst Filter = ({val, changeHandler}) => {\n    return (<div>\n        rajaa näytettäviä: <input value={val} onChange={changeHandler}/>\n    </div>)\n};\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({name, nameHandler, number, numberHandler, submitHandler}) => {\n\n    return (\n        <form>\n            <h2>Lisää uusi</h2>\n            <div>\n                nimi: <input value={name} onChange={nameHandler}/>\n            </div>\n            <div>\n                numero: <input value={number} onChange={numberHandler}/>\n            </div>\n            <div>\n                <button type=\"submit\" onClick={submitHandler}>lisää</button>\n            </div>\n        </form>\n    )\n};\n\nexport default PersonForm;\n","import axios from 'axios';\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n        .then(resp => {\n            console.log(\"Persons fetched\");\n            return resp.data;\n        })\n        .catch(err => {\n            console.log(\"Cannot fetch persons \", err);\n            return [];\n        });\n};\n\nconst addPerson = (name, number) => {\n    const newPerson = {\n        name: name,\n        number: number\n    };\n\n    return axios.post(baseUrl, newPerson)\n        .then(resp => {\n            console.log(resp);\n            return resp.data;\n        });\n};\n\nconst deletePerson = (id) => {\n    const deleteUrl = `${baseUrl}/${id}`;\n    console.log(`Sending delete to ${deleteUrl}`);\n\n    return axios.delete(deleteUrl)\n        .then(result => id);\n};\n\nconst updatePerson = (person) => {\n\n    const updateUrl = `${baseUrl}/${person.id}`;\n    console.log(`Sending update to ${updateUrl}`);\n\n    return axios.put(updateUrl, person)\n        .then(resp => {\n            console.log(\"Updated!!!\");\n            return resp.data;\n        });\n};\n\nexport default {getAll, addPerson, deletePerson, updatePerson};","import React from 'react';\n\nconst Notification = ({message, type}) => {\n    console.log(\"note\", message, type);\n    if (message === null) {\n        return <></>\n    }\n\n    const className = `message ${type}`;\n    console.log(className);\n\n    return (\n        <div className={className}>\n            {message}\n        </div>\n    )\n};\n\n\nexport default Notification;","import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport Caption from './components/Caption'\nimport PersonForm from \"./components/PersonForm\";\nimport personservice from './services/PersonService';\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n\n    const [noteText, setNoteText] = useState(null);\n    const [noteType, setNoteType] = useState('success');\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [nameFilter, setNewNameFilter] = useState('');\n\n    const fetchNames = () => {\n\n        personservice.getAll()\n            .then(initialPersons => setPersons(initialPersons))\n    };\n\n    useEffect(fetchNames, []);\n\n    const addName = (event) => {\n        event.preventDefault();\n\n        if (persons.some(person => person.name === newName)) {\n            if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha nimi uudella?`) === false) {\n                return;\n            }\n\n            const newPerson = {...persons.find(p => p.name === newName), number: newNumber};\n            personservice.updatePerson(newPerson)\n                .then(up => {\n                    setPersons(persons.map(p => p.id !== newPerson.id ? p : newPerson));\n                    showNote(`Henkilö ${up.name} päivitettiin`, 'success');\n                }).catch(err => {\n                showNote(`Virhe henkilön ${newName} päivittämisessä`, 'error');\n            });\n        } else {\n\n            personservice.addPerson(newName, newNumber)\n                .then(newPerson => {\n                    setPersons(persons.concat(newPerson));\n                    showNote(`Henkilö ${newPerson.name} lisättiin`, 'success');\n                }).catch(err => {\n                showNote(`Virhe henkilön ${newName} lisäämisessä`, 'error');\n            });\n        }\n\n\n        setNewName('');\n        setNewNumber('');\n    };\n\n    const showNote = (text, type) => {\n        setNoteText(text);\n        setNoteType(type);\n        setNoteDismissal();\n    };\n\n    const setNoteDismissal = () => {\n        setTimeout(() => {\n            setNoteText(null);\n        }, 2000);\n    };\n\n    const nameFilterChange = (event) => {\n        setNewNameFilter(event.target.value);\n    };\n\n    const nameChange = (event) => {\n        setNewName(event.target.value);\n    };\n\n    const numberChange = (event) => {\n        setNewNumber(event.target.value);\n    };\n\n    const deletePerson = (id) => (event) => {\n        event.preventDefault();\n\n        const person = persons.find(p => p.id === id);\n\n        if (window.confirm(`Poistetaanko ${person.name}`)) {\n            personservice.deletePerson(id)\n                .then(id => {\n                    console.log(\"Person deleted\");\n                    showNote(`Henkilö ${person.name} poistettiin`, 'success');\n                })\n                .catch(err => {\n                    showNote(`Henkilö ${person.name} oli jo poistettu`, 'error');\n                })\n                .finally(() => setPersons(persons.filter(p => p.id !== person.id)));\n        }\n    };\n\n    return (\n        <div>\n            <Notification message={noteText} type={noteType}/>\n            <Caption caption=\"Puhelinluettelo\"/>\n            <Filter val={nameFilter} changeHandler={nameFilterChange}/>\n            <PersonForm name={newName} nameHandler={nameChange}\n                        number={newNumber} numberHandler={numberChange}\n                        submitHandler={addName}/>\n            <Persons persons={persons} nameFilter={nameFilter} deleteHandler={deletePerson}/>\n        </div>\n    )\n\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}