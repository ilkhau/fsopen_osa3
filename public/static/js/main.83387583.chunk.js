(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,n,t){e.exports=t(40)},19:function(e,n,t){},20:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(11),c=t.n(o),l=(t(19),t(12)),u=t(2),i=(t(20),function(e){var n=e.caption;return r.a.createElement("h2",null,n)}),s=function(e){var n=e.text,t=e.handler;return r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:t},n))},m=function(e){var n=e.person,t=e.deleteHandler;return console.log(n),r.a.createElement("li",null,n.name," ",n.number,r.a.createElement(s,{text:"poista",handler:t(n.id)}))},f=function(e){var n=e.persons,t=e.nameFilter,a=e.deleteHandler;return r.a.createElement("div",null,r.a.createElement(i,{caption:"Henkil\xf6t"}),r.a.createElement("ul",null,function(){var e=function(e){return!0};return t.length>0&&(e=function(e){var n=e.name.toLowerCase().includes(t.toLocaleLowerCase());return console.log(e,n),n}),n.filter(function(n){return e(n)}).map(function(e){return console.log(JSON.stringify(e)),r.a.createElement(m,{key:e.name,person:e,deleteHandler:a})})}()))},d=function(e){var n=e.val,t=e.changeHandler;return r.a.createElement("div",null,"rajaa n\xe4ytett\xe4vi\xe4: ",r.a.createElement("input",{value:n,onChange:t}))},v=function(e){var n=e.name,t=e.nameHandler,a=e.number,o=e.numberHandler,c=e.submitHandler;return r.a.createElement("form",null,r.a.createElement("h2",null,"Lis\xe4\xe4 uusi"),r.a.createElement("div",null,"nimi: ",r.a.createElement("input",{value:n,onChange:t})),r.a.createElement("div",null,"numero: ",r.a.createElement("input",{value:a,onChange:o})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit",onClick:c},"lis\xe4\xe4")))},p=t(3),g=t.n(p),h="/api/persons",E=function(){return g.a.get(h).then(function(e){return console.log("Persons fetched"),e.data}).catch(function(e){return console.log("Cannot fetch persons ",e),[]})},b=function(e,n){var t={name:e,number:n};return g.a.post(h,t).then(function(e){return console.log(e),e.data}).catch(function(e){throw console.log(e.response.data.error),new Error(e.response.data.error)})},j=function(e){var n="".concat(h,"/").concat(e);return console.log("Sending delete to ".concat(n)),g.a.delete(n).then(function(n){return e})},H=function(e){var n="".concat(h,"/").concat(e.id);return console.log("Sending update to ".concat(n)),g.a.put(n,e).then(function(e){return console.log("Updated!!!"),e.data}).catch(function(e){throw console.log(e.response.data.error),new Error(e.response.data.error)})},w=function(e){var n=e.message,t=e.type;if(console.log("note",n,t),null===n)return r.a.createElement(r.a.Fragment,null);var a="message ".concat(t);return console.log(a),r.a.createElement("div",{className:a},n)},k=function(){var e=Object(a.useState)(null),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)("success"),s=Object(u.a)(c,2),m=s[0],p=s[1],g=Object(a.useState)([]),h=Object(u.a)(g,2),k=h[0],O=h[1],S=Object(a.useState)(""),y=Object(u.a)(S,2),C=y[0],F=y[1],L=Object(a.useState)(""),P=Object(u.a)(L,2),x=P[0],J=P[1],D=Object(a.useState)(""),N=Object(u.a)(D,2),V=N[0],B=N[1];Object(a.useEffect)(function(){E().then(function(e){return O(e)})},[]);var I=function(e,n){o(e),p(n),T()},T=function(){setTimeout(function(){o(null)},2e3)};return r.a.createElement("div",null,r.a.createElement(w,{message:t,type:m}),r.a.createElement(i,{caption:"Puhelinluettelo"}),r.a.createElement(d,{val:V,changeHandler:function(e){B(e.target.value)}}),r.a.createElement(v,{name:C,nameHandler:function(e){F(e.target.value)},number:x,numberHandler:function(e){J(e.target.value)},submitHandler:function(e){if(e.preventDefault(),k.some(function(e){return e.name===C})){if(!1===window.confirm("".concat(C," on jo luettelossa, korvataanko vanha nimi uudella?")))return;var n=Object(l.a)({},k.find(function(e){return e.name===C}),{number:x});H(n).then(function(e){O(k.map(function(e){return e.id!==n.id?e:n})),I("Henkil\xf6 ".concat(e.name," p\xe4ivitettiin"),"success"),F(""),J("")}).catch(function(e){I("Virhe henkil\xf6n ".concat(C," p\xe4ivitt\xe4misess\xe4: ").concat(e.message),"error")})}else b(C,x).then(function(e){O(k.concat(e)),I("Henkil\xf6 ".concat(e.name," lis\xe4ttiin"),"success"),F(""),J("")}).catch(function(e){console.log(e),I("Virhe henkil\xf6n ".concat(C," lis\xe4\xe4misess\xe4: ").concat(e.message),"error")})}}),r.a.createElement(f,{persons:k,nameFilter:V,deleteHandler:function(e){return function(n){n.preventDefault();var t=k.find(function(n){return n.id===e});window.confirm("Poistetaanko ".concat(t.name))&&j(e).then(function(e){console.log("Person deleted"),I("Henkil\xf6 ".concat(t.name," poistettiin"),"success")}).catch(function(e){I("Henkil\xf6 ".concat(t.name," oli jo poistettu"),"error")}).finally(function(){return O(k.filter(function(e){return e.id!==t.id}))})}}}))};c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.83387583.chunk.js.map