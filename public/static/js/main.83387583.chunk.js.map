{"version":3,"sources":["components/Caption.js","components/Button.js","components/Persons.js","components/Filter.js","components/PersonForm.js","services/PersonService.js","components/Notification.js","App.js","index.js"],"names":["Caption","_ref","caption","react_default","a","createElement","Button","text","handler","Fragment","onClick","Person","person","deleteHandler","console","log","name","number","components_Button","id","Persons","_ref2","persons","nameFilter","components_Caption","filterFn","length","val","toLowerCase","includes","toLocaleLowerCase","filter","map","JSON","stringify","Persons_Person","key","personList","Filter","changeHandler","value","onChange","PersonForm","nameHandler","numberHandler","submitHandler","type","baseUrl","PersonService","axios","get","then","resp","data","catch","err","newPerson","post","response","error","Error","deleteUrl","concat","delete","result","updateUrl","put","Notification","message","className","App","_useState","useState","_useState2","Object","slicedToArray","noteText","setNoteText","_useState3","_useState4","noteType","setNoteType","_useState5","_useState6","setPersons","_useState7","_useState8","newName","setNewName","_useState9","_useState10","newNumber","setNewNumber","_useState11","_useState12","setNewNameFilter","useEffect","personservice","initialPersons","showNote","setNoteDismissal","setTimeout","components_Notification","components_Filter","event","target","components_PersonForm","preventDefault","some","window","confirm","objectSpread","find","p","up","components_Persons","finally","ReactDOM","render","src_App_0","document","getElementById"],"mappings":"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","file":"static/js/main.83387583.chunk.js","sourcesContent":["import React from 'react';\n\nconst Caption = ({caption}) => {\n    return (\n        <h2>{caption}</h2>\n    )\n};\n\nexport default Caption;","import React from 'react';\n\nconst Button = ({text, handler}) => {\n    return (\n        <>\n            <button onClick={handler} >{text}</button>\n        </>\n    )\n};\n\nexport default Button;","import React from 'react';\nimport Caption from './Caption'\nimport Button from './Button'\n\nconst Person = ({person, deleteHandler}) => {\n    console.log(person);\n    return (\n        <li>\n            {person.name} {person.number}\n            <Button text=\"poista\" handler={deleteHandler(person.id)} />\n        </li>\n    )\n};\n\nconst Persons = ({persons, nameFilter, deleteHandler}) => {\n\n    const personList = () => {\n\n        let filterFn = (person) => true;\n\n        if (nameFilter.length > 0) {\n            filterFn = (person) => {\n                const val = person.name.toLowerCase().includes(nameFilter.toLocaleLowerCase());\n                console.log(person, val);\n                return val;\n            }\n        }\n\n        return persons.filter(person => filterFn(person)).map(person => {\n            console.log(JSON.stringify(person));\n            return <Person key={person.name} person={person} deleteHandler={deleteHandler}/>\n        });\n    };\n\n    return (\n        <div>\n            <Caption caption=\"Henkilöt\"/>\n            <ul>\n                {personList()}\n            </ul>\n        </div>\n    )\n};\n\nexport default Persons;","import React from 'react';\n\nconst Filter = ({val, changeHandler}) => {\n    return (<div>\n        rajaa näytettäviä: <input value={val} onChange={changeHandler}/>\n    </div>)\n};\n\nexport default Filter;","import React from 'react';\n\nconst PersonForm = ({name, nameHandler, number, numberHandler, submitHandler}) => {\n\n    return (\n        <form>\n            <h2>Lisää uusi</h2>\n            <div>\n                nimi: <input value={name} onChange={nameHandler}/>\n            </div>\n            <div>\n                numero: <input value={number} onChange={numberHandler}/>\n            </div>\n            <div>\n                <button type=\"submit\" onClick={submitHandler}>lisää</button>\n            </div>\n        </form>\n    )\n};\n\nexport default PersonForm;\n","import axios from 'axios';\n\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n    return axios.get(baseUrl)\n        .then(resp => {\n            console.log(\"Persons fetched\");\n            return resp.data;\n        })\n        .catch(err => {\n            console.log(\"Cannot fetch persons \", err);\n            return [];\n        });\n};\n\nconst addPerson = (name, number) => {\n    const newPerson = {\n        name: name,\n        number: number\n    };\n\n    return axios.post(baseUrl, newPerson)\n        .then(resp => {\n            console.log(resp);\n            return resp.data;\n        }).catch(err => {\n            console.log(err.response.data.error);\n            throw new Error(err.response.data.error);\n        });\n};\n\nconst deletePerson = (id) => {\n    const deleteUrl = `${baseUrl}/${id}`;\n    console.log(`Sending delete to ${deleteUrl}`);\n\n    return axios.delete(deleteUrl)\n        .then(result => id);\n};\n\nconst updatePerson = (person) => {\n\n    const updateUrl = `${baseUrl}/${person.id}`;\n    console.log(`Sending update to ${updateUrl}`);\n\n    return axios.put(updateUrl, person)\n        .then(resp => {\n            console.log(\"Updated!!!\");\n            return resp.data;\n        }).catch(err => {\n            console.log(err.response.data.error);\n            throw new Error(err.response.data.error);\n        });\n};\n\nexport default {getAll, addPerson, deletePerson, updatePerson};","import React from 'react';\n\nconst Notification = ({message, type}) => {\n    console.log(\"note\", message, type);\n    if (message === null) {\n        return <></>\n    }\n\n    const className = `message ${type}`;\n    console.log(className);\n\n    return (\n        <div className={className}>\n            {message}\n        </div>\n    )\n};\n\n\nexport default Notification;","import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport Caption from './components/Caption'\nimport PersonForm from \"./components/PersonForm\";\nimport personservice from './services/PersonService';\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n\n    const [noteText, setNoteText] = useState(null);\n    const [noteType, setNoteType] = useState('success');\n    const [persons, setPersons] = useState([]);\n    const [newName, setNewName] = useState('');\n    const [newNumber, setNewNumber] = useState('');\n    const [nameFilter, setNewNameFilter] = useState('');\n\n    const fetchNames = () => {\n\n        personservice.getAll()\n            .then(initialPersons => setPersons(initialPersons))\n    };\n\n    useEffect(fetchNames, []);\n\n    const addName = (event) => {\n        event.preventDefault();\n\n        if (persons.some(person => person.name === newName)) {\n            if (window.confirm(`${newName} on jo luettelossa, korvataanko vanha nimi uudella?`) === false) {\n                return;\n            }\n\n            const newPerson = {...persons.find(p => p.name === newName), number: newNumber};\n            personservice.updatePerson(newPerson)\n                .then(up => {\n                    setPersons(persons.map(p => p.id !== newPerson.id ? p : newPerson));\n                    showNote(`Henkilö ${up.name} päivitettiin`, 'success');\n\n                    setNewName('');\n                    setNewNumber('');\n\n                }).catch(err => {\n                showNote(`Virhe henkilön ${newName} päivittämisessä: ${err.message}`, 'error');\n            });\n        } else {\n\n            personservice.addPerson(newName, newNumber)\n                .then(newPerson => {\n                    setPersons(persons.concat(newPerson));\n                    showNote(`Henkilö ${newPerson.name} lisättiin`, 'success');\n\n                    setNewName('');\n                    setNewNumber('');\n                }).catch(err => {\n                console.log(err);\n                showNote(`Virhe henkilön ${newName} lisäämisessä: ${err.message}`, 'error');\n            });\n        }\n    };\n\n    const showNote = (text, type) => {\n        setNoteText(text);\n        setNoteType(type);\n        setNoteDismissal();\n    };\n\n    const setNoteDismissal = () => {\n        setTimeout(() => {\n            setNoteText(null);\n        }, 2000);\n    };\n\n    const nameFilterChange = (event) => {\n        setNewNameFilter(event.target.value);\n    };\n\n    const nameChange = (event) => {\n        setNewName(event.target.value);\n    };\n\n    const numberChange = (event) => {\n        setNewNumber(event.target.value);\n    };\n\n    const deletePerson = (id) => (event) => {\n        event.preventDefault();\n\n        const person = persons.find(p => p.id === id);\n\n        if (window.confirm(`Poistetaanko ${person.name}`)) {\n            personservice.deletePerson(id)\n                .then(id => {\n                    console.log(\"Person deleted\");\n                    showNote(`Henkilö ${person.name} poistettiin`, 'success');\n                })\n                .catch(err => {\n                    showNote(`Henkilö ${person.name} oli jo poistettu`, 'error');\n                })\n                .finally(() => setPersons(persons.filter(p => p.id !== person.id)));\n        }\n    };\n\n    return (\n        <div>\n            <Notification message={noteText} type={noteType}/>\n            <Caption caption=\"Puhelinluettelo\"/>\n            <Filter val={nameFilter} changeHandler={nameFilterChange}/>\n            <PersonForm name={newName} nameHandler={nameChange}\n                        number={newNumber} numberHandler={numberChange}\n                        submitHandler={addName}/>\n            <Persons persons={persons} nameFilter={nameFilter} deleteHandler={deletePerson}/>\n        </div>\n    )\n\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}